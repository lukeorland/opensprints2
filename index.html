<html>

<body>
  <h1>Hello WAMP</h1>
  <p>Open JavaScript console to watch output.</p>
  <script>
    AUTOBAHN_DEBUG = true;

  </script>

  <script>
    var autobahn = require('autobahn');
    // Create a new client connection.
    // See http://autobahn.ws/js/ for reference.
    var client = new autobahn.Connection({
      url: 'ws://localhost:9000/ws',
      realm: 'realm1'
    });

    // When client session is established, call 'random integer' service
    // and subscribe to 'time' event.
    client.onopen = function(session) {

      // subscribe to a topic
      session.subscribe('com.opensprints.race.ticks', function(args) {
          console.log("Event:", args[0]);
        })
        .catch(function(err) {
          console.log('cannot subscribe to topic!', err);
        })
        .done();
    };

    // Open client connection.
    client.open();

  </script>
</body>

</html>
